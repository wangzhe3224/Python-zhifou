# 脱离程序员初级阶段的必备技能：并发

> 这里暂时不讨论并发和并行的关系，并发这里就是只让计算机”看起来“同时做很多事情，而不是一件事情。

很多初学编程的小伙伴在经历了最初的学习后，已经可以编写一些脚本或者小程序了，比如一些爬虫、文件处理程序等等。但是，这些程序往往都是顺序运行，且同一时间只能做一件事情，也就是常说的单线程程序。有时候，我们也叫这类程序：同步程序（Sync)或者阻塞（Blocking）程序。

然而，很多情况我们的电脑CPU包含多个核心，可以同时进行多任务处理；还有一些情况，我们的程序卡在某一个IO过程中，CPU并没有做任何计算，而是等待IO。为了在这情况充分利用CPU资源，提高程序的运行效率，我们需要一种新的编程模式：并发编程。

## Python的并发实现

所有并发基本上会涉及三个问题：

- 通讯
- 同步
- 共享内存

只不过不同的并发模型，上述三个问题的处理方案和利弊各有不同。

从实现原理上，总体可以分为抢占式（进程和线程）和合作式（协程）。

### 进程（Process）

[>> Code <<](con_process.py)

- 通讯：主要是通过 `mp.Queue` 实现的
- 同步：通过锁和信号
- 共享内存：
  - 原始类型
  - 通过服务器进程

### 线程（Thread）

- 通讯
- 同步
- 共享内存

### 协程（Async）

## Ref

- <https://python3-cookbook.readthedocs.io/zh_CN/latest/c12/p03_communicating_between_threads.html>
